@page "/configuracoes"

<PageTitle>Configurações</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudPaper Elevation="0" Class="pa-6 mb-6" Style="border-radius: 12px; border-left: 4px solid var(--mud-palette-primary);">
        <div class="d-flex align-center">
            <MudAvatar Color="Color.Primary" Variant="Variant.Filled" Size="Size.Large" Style="background: rgba(var(--mud-palette-primary-rgb), 0.1);">
                <MudIcon Icon="@Icons.Material.Filled.Settings" Color="Color.Primary" Size="Size.Medium" />
            </MudAvatar>
            <div class="ml-4">
                <MudText Typo="Typo.h4" Style="font-weight: 700;">
                    Configurações
                </MudText>
                <MudText Typo="Typo.body1" Style="opacity: 0.7; margin-top: 4px;">
                    Gerencie as informações e preferências do seu estabelecimento
                </MudText>
            </div>
        </div>
    </MudPaper>

    <MudPaper Elevation="0" Class="pa-6 mb-4" Style="border-radius: 12px;">
        <MudText Typo="Typo.h6" Style="font-weight: 700;" Class="mb-1">
            Informações do Estabelecimento
        </MudText>
        <MudText Typo="Typo.body2" Style="opacity: 0.6;" Class="mb-4">
            Configure o nome e descrição que aparecerão para seus clientes
        </MudText>

        <MudGrid Spacing="3">
            <MudItem xs="12" md="6">
                <MudTextField @bind-Value="_storeName" Label="Nome do Estabelecimento" Variant="Variant.Outlined"
                    FullWidth="true" Margin="Margin.Dense" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudTextField @bind-Value="_storeDescription" Label="Descrição" Variant="Variant.Outlined"
                    FullWidth="true" Margin="Margin.Dense" HelperText="Breve descrição do seu negócio" />
            </MudItem>
        </MudGrid>
    </MudPaper>

    <MudPaper Elevation="0" Class="pa-6 mb-4" Style="border-radius: 12px;">
        <MudText Typo="Typo.h6" Style="font-weight: 700;" Class="mb-1">
            Identidade Visual
        </MudText>
        <MudText Typo="Typo.body2" Style="opacity: 0.6;" Class="mb-4">
            Personalize as cores do seu estabelecimento
        </MudText>

        <MudGrid Spacing="3">
            <MudItem xs="12" md="6">
                <div class="d-flex flex-column">
                    <MudTextField @bind-Value="_primaryColor" Label="Cor Primária" Variant="Variant.Outlined"
                        FullWidth="true" Margin="Margin.Dense" Placeholder="#4a1998"
                        HelperText="Clique no ícone para escolher a cor" Adornment="Adornment.End"
                        AdornmentIcon="@Icons.Material.Filled.ColorLens"
                        OnAdornmentClick="() => _showPrimaryColorPicker = !_showPrimaryColorPicker"
                        AdornmentColor="Color.Primary" />

                    @if (_showPrimaryColorPicker)
                    {
                        <MudColorPicker @bind-Text="_primaryColor" ColorPickerMode="ColorPickerMode.HEX" Class="mt-2"
                            DisableAlpha="true" DisableToolbar="false" />
                    }

                    @if (!string.IsNullOrEmpty(_primaryColor))
                    {
                        <MudPaper Class="pa-3 mt-2 d-flex align-center"
                            Style="@($"background: {_primaryColor}; border-radius: 8px; min-height: 50px;")">
                            <MudText Typo="Typo.body2" Style="color: white; font-weight: 600;">
                                Preview da Cor Primária
                            </MudText>
                        </MudPaper>
                    }
                </div>
            </MudItem>

            <MudItem xs="12" md="6">
                <div class="d-flex flex-column">
                    <MudTextField @bind-Value="_secondaryColor" Label="Cor Secundária" Variant="Variant.Outlined"
                        FullWidth="true" Margin="Margin.Dense" Placeholder="#ec4899"
                        HelperText="Clique no ícone para escolher a cor" Adornment="Adornment.End"
                        AdornmentIcon="@Icons.Material.Filled.ColorLens"
                        OnAdornmentClick="() => _showSecondaryColorPicker = !_showSecondaryColorPicker"
                        AdornmentColor="Color.Secondary" />

                    @if (_showSecondaryColorPicker)
                    {
                        <MudColorPicker @bind-Text="_secondaryColor" ColorPickerMode="ColorPickerMode.HEX" Class="mt-2"
                            DisableAlpha="true" DisableToolbar="false" />
                    }

                    @if (!string.IsNullOrEmpty(_secondaryColor))
                    {
                        <MudPaper Class="pa-3 mt-2 d-flex align-center"
                            Style="@($"background: {_secondaryColor}; border-radius: 8px; min-height: 50px;")">
                            <MudText Typo="Typo.body2" Style="color: white; font-weight: 600;">
                                Preview da Cor Secundária
                            </MudText>
                        </MudPaper>
                    }
                </div>
            </MudItem>
        </MudGrid>

        <MudDivider Class="my-4" />

        <div class="d-flex justify-end gap-2">
            <MudButton Variant="Variant.Outlined" Color="Color.Default" Size="Size.Medium" Style="border-radius: 8px;">
                Cancelar
            </MudButton>
            <MudButton Variant="Variant.Outlined" Color="Color.Inherit" Size="Size.Medium"
                StartIcon="@Icons.Material.Outlined.Save" Style="border-radius: 8px;">
                Salvar Alterações
            </MudButton>
        </div>
    </MudPaper>

    <MudPaper Elevation="0" Class="pa-6" Style="border-radius: 12px; border-left: 4px solid var(--mud-palette-error);">
        <div class="d-flex align-center mb-4">
            <MudAvatar Color="Color.Error" Variant="Variant.Filled" Size="Size.Large" Style="background: rgba(var(--mud-palette-error-rgb), 0.1);">
                <MudIcon Icon="@Icons.Material.Filled.Warning" Color="Color.Error" Size="Size.Medium" />
            </MudAvatar>
            <div class="ml-3">
                <MudText Typo="Typo.h6" Style="font-weight: 700;">
                    Zona de Perigo
                </MudText>
                <MudText Typo="Typo.body2" Style="opacity: 0.7;">
                    Ações irreversíveis que afetam sua conta
                </MudText>
            </div>
        </div>

        <MudDivider Class="my-4" />

        <div class="d-flex justify-space-between align-center">
            <div>
                <MudText Typo="Typo.body1" Style="font-weight: 600;">
                    Cancelar Assinatura
                </MudText>
                <MudText Typo="Typo.body2" Style="opacity: 0.6; margin-top: 4px;">
                    Ao cancelar, você perderá acesso a todos os recursos do sistema
                </MudText>
            </div>
            <MudButton Variant="Variant.Outlined" 
                      Color="Color.Error" 
                      Size="Size.Medium"
                      StartIcon="@Icons.Material.Filled.Cancel" 
                      OnClick="OpenCancelSubscriptionDialog"
                      Style="border-radius: 8px;">
                Cancelar Assinatura
            </MudButton>
        </div>
    </MudPaper>
</MudContainer>

@code {
    private string _storeName = "Hora do Lanche";
    private string _storeDescription = "O melhor lanche do bairro!";
    private string _primaryColor = "#5B21B6";
    private string _secondaryColor = "#EC4899";
    private bool _showPrimaryColorPicker = false;
    private bool _showSecondaryColorPicker = false;

    private void OpenCancelSubscriptionDialog()
    {

    }
}